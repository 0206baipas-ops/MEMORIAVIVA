import{_ as A,r as d,o as M,i as k,w as R,c as l,a,b as i,d as c,n as m,e as b,T as I,F as C,g as y,h as o,j as N,f as $,l as S,t as j}from"./index--K-FFms5.js";import{_ as B}from"./ABOUT-yPVQ1ME-.js";const E="/memoriaviva/PLAQUES/placa1.png",U={class:"memoria"},x={key:0,class:"intro"},V=["onClick"],P=["src"],q={class:"modal-final",role:"dialog","aria-modal":"true"},z={class:"modal-content"},D={class:"left-section"},F={class:"title"},H=["innerHTML"],Q={key:0,class:"right-section"},G={class:"carousel-container"},J={class:"carousel-main"},K=["src"],O={class:"carousel-dots"},W=["onClick"],X={__name:"Ruta",setup(Y){const p=d(!0),n=d(null),r=d(0),f=d(!1);let h=null;const v=d([]);M(async()=>{sessionStorage.getItem("has-visited")?f.value=!0:(sessionStorage.setItem("has-visited","true"),setTimeout(()=>{f.value=!0},3e3)),setTimeout(()=>{p.value=!1},3500);try{const t=await fetch("/Llistacases.json");if(!t.ok)throw new Error("No s’ha pogut carregar Llistacases.json");const e=await t.json();v.value=e}catch(t){console.error("Error carregant Llistacases.json:",t)}});const w=k(()=>Array.from({length:v.value.length},(t,e)=>e+2)),s=k(()=>!n.value||v.value.length===0?{nom:"",descripcio:"",carpeta:"",imageNames:[]}:v.value[n.value-2]||{nom:"",descripcio:"",carpeta:"",imageNames:[]}),L=k(()=>{if(!s.value.carpeta||!s.value.imageNames?.length)return"";const t=r.value%s.value.imageNames.length,e=s.value.imageNames[t];return`/ruta/${encodeURIComponent(s.value.carpeta)}/${encodeURIComponent(e)}`});return R(n,t=>{t&&s.value.imageNames?.length>0?(r.value=0,clearInterval(h),h=setInterval(()=>{r.value=(r.value+1)%s.value.imageNames.length},4e3)):clearInterval(h)}),(t,e)=>{const _=b("router-link"),T=b("AboutButton");return o(),l("div",U,[a("div",{class:m(["titles",{up:f.value}])},[i(_,{to:"/somni",class:m(["title-left",{actiu:t.$route.path==="/somni"}])},{default:c(()=>[...e[2]||(e[2]=[a("h1",null,"Somni",-1)])]),_:1},8,["class"]),i(_,{to:"/memoria",class:m(["title-center",{actiu:t.$route.path==="/memoria"}])},{default:c(()=>[...e[3]||(e[3]=[a("h1",null,"Memòria",-1)])]),_:1},8,["class"]),i(_,{to:"/ruta",class:m(["title-right",{actiu:t.$route.path==="/ruta"}])},{default:c(()=>[...e[4]||(e[4]=[a("h1",null,"Ruta",-1)])]),_:1},8,["class"])],2),i(I,{name:"fade"},{default:c(()=>[p.value?(o(),l("div",x,[...e[5]||(e[5]=[a("div",{class:"intro-content"},[a("img",{src:E,class:"intro-placa",alt:"Placa introductòria"}),a("div",{class:"frase"},[$(" Descobreix els secrets "),a("span",null,"més ben guardats"),$(" del Modernisme de Reus ")])],-1)])])):N("",!0)]),_:1}),a("div",{class:m(["mosaic",{visible:!p.value}])},[(o(!0),l(C,null,y(w.value,u=>(o(),l("div",{key:u,class:"cell",onClick:g=>n.value=u},[a("img",{src:`/PLAQUES/placa${u}.png`,class:"plaqueta",loading:"lazy",alt:""},null,8,P)],8,V))),128))],2),i(I,{name:"modal"},{default:c(()=>[n.value?(o(),l("div",{key:0,class:"overlay",onClick:e[1]||(e[1]=S(u=>n.value=null,["self"]))},[a("div",q,[a("button",{class:"close",onClick:e[0]||(e[0]=u=>n.value=null),"aria-label":"Tancar"},"×"),a("div",z,[a("div",D,[a("h2",F,j(s.value.nom),1),a("div",{class:"text",innerHTML:s.value.descripcio},null,8,H)]),s.value.carpeta&&s.value.imageNames?.length?(o(),l("div",Q,[a("div",G,[a("div",J,[(o(),l("img",{src:L.value,class:"carousel-image",key:r.value,alt:"Imatge de la casa"},null,8,K))]),a("div",O,[(o(!0),l(C,null,y(s.value.imageNames,(u,g)=>(o(),l("span",{key:g,class:m(["dot",{active:g===r.value}]),onClick:Z=>r.value=g},null,10,W))),128))])])])):N("",!0)])])])):N("",!0)]),_:1}),i(T),i(_,{to:"/about",class:"about-btn"},{default:c(()=>[...e[6]||(e[6]=[a("img",{src:B,alt:"About"},null,-1)])]),_:1})])}}},te=A(X,[["__scopeId","data-v-dee317cb"]]);export{te as default};
